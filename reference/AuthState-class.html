<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Authorization state — AuthState-class • gargle</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Authorization state — AuthState-class" />
<meta property="og:description" content="An AuthState object manages an authorization state, typically on behalf of
a client package that makes requests to a Google API.
The How to use gargle for auth in a client package
vignette describes a design for wrapper packages that relies on an AuthState
object. This state can then be incorporated into the package's requests for
tokens and can control the inclusion of tokens in requests to the target API.
api_key is the simplest way to associate a request with a specific
Google Cloud Platform project.
A few calls to certain APIs, e.g. reading a public Sheet, can succeed
with an API key, but this is the exception.
app is an OAuth app associated with a specific Google Cloud Platform
project.
This is used in the OAuth flow, in which an authenticated user authorizes
the app to access or manipulate data on their behalf.
auth_active reflects whether outgoing requests will be authorized by an
authenticated user or are unauthorized requests for public resources.
These two states correspond to sending a request with a token versus an
API key, respectively.
cred is where the current token is cached within a session, once one
has been fetched. It is generally assumed to be an instance of
httr::TokenServiceAccount or
httr::Token2.0 (or a subclass thereof), probably
obtained via token_fetch() (or one of its constituent credential
fetching functions).


An AuthState should be created through the constructor function
init_AuthState(), which has more details on the arguments." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gargle</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/non-interactive-auth.html">Non-interactive auth</a>
    </li>
    <li>
      <a href="../articles/troubleshooting.html">Troubleshooting gargle auth</a>
    </li>
    <li>
      <a href="../articles/auth-from-web.html">Auth when using R in the browser</a>
    </li>
    <li>
      <a href="../articles/get-api-credentials.html">How to get your own API credentials</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../articles/index.html">More...</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Blog posts</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2019/08/gargle-hello-world/">gargle's debut on CRAN</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/gargle/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Authorization state</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/gargle/blob/master/R/AuthState-class.R'><code>R/AuthState-class.R</code></a></small>
    <div class="hidden name"><code>AuthState-class.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>An <code>AuthState</code> object manages an authorization state, typically on behalf of
a client package that makes requests to a Google API.</p>
<p>The <a href='https://gargle.r-lib.org/articles/gargle-auth-in-client-package.html'>How to use gargle for auth in a client package</a>
vignette describes a design for wrapper packages that relies on an <code>AuthState</code>
object. This state can then be incorporated into the package's requests for
tokens and can control the inclusion of tokens in requests to the target API.</p><ul>
<li><p><code>api_key</code> is the simplest way to associate a request with a specific
Google Cloud Platform <a href='https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy#projects'>project</a>.
A few calls to certain APIs, e.g. reading a public Sheet, can succeed
with an API key, but this is the exception.</p></li>
<li><p><code>app</code> is an OAuth app associated with a specific Google Cloud Platform
<a href='https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy#projects'>project</a>.
This is used in the OAuth flow, in which an authenticated user authorizes
the app to access or manipulate data on their behalf.</p></li>
<li><p><code>auth_active</code> reflects whether outgoing requests will be authorized by an
authenticated user or are unauthorized requests for public resources.
These two states correspond to sending a request with a token versus an
API key, respectively.</p></li>
<li><p><code>cred</code> is where the current token is cached within a session, once one
has been fetched. It is generally assumed to be an instance of
<code><a href='https://httr.r-lib.org/reference/Token-class.html'>httr::TokenServiceAccount</a></code> or
<code><a href='https://httr.r-lib.org/reference/Token-class.html'>httr::Token2.0</a></code> (or a subclass thereof), probably
obtained via <code><a href='token_fetch.html'>token_fetch()</a></code> (or one of its constituent credential
fetching functions).</p></li>
</ul>

<p>An <code>AuthState</code> should be created through the constructor function
<code><a href='init_AuthState.html'>init_AuthState()</a></code>, which has more details on the arguments.</p>
    </div>



    <h2 class="hasAnchor" id="public-fields"><a class="anchor" href="#public-fields"></a>Public fields</h2>

    <p><div class="r6-fields"></p><dl>
<dt><code>package</code></dt><dd><p>Package name.</p></dd>

<dt><code>app</code></dt><dd><p>An OAuth consumer application.</p></dd>

<dt><code>api_key</code></dt><dd><p>An API key.</p></dd>

<dt><code>auth_active</code></dt><dd><p>Logical, indicating whether auth is active.</p></dd>

<dt><code>cred</code></dt><dd><p>Credentials.</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>AuthState$new()</code></a></p></li>
<li><p><a href='#method-format'><code>AuthState$format()</code></a></p></li>
<li><p><a href='#method-set_app'><code>AuthState$set_app()</code></a></p></li>
<li><p><a href='#method-set_api_key'><code>AuthState$set_api_key()</code></a></p></li>
<li><p><a href='#method-set_auth_active'><code>AuthState$set_auth_active()</code></a></p></li>
<li><p><a href='#method-set_cred'><code>AuthState$set_cred()</code></a></p></li>
<li><p><a href='#method-clear_cred'><code>AuthState$clear_cred()</code></a></p></li>
<li><p><a href='#method-get_cred'><code>AuthState$get_cred()</code></a></p></li>
<li><p><a href='#method-has_cred'><code>AuthState$has_cred()</code></a></p></li>
<li><p><a href='#method-clone'><code>AuthState$clone()</code></a></p></li>
</ul>
<p><hr>
<a id="method-new"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>new()</code></h3>
<p>Create a new AuthState</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>AuthState</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  package <span class='op'>=</span> <span class='cn'>NA_character_</span>,
  app <span class='op'>=</span> <span class='cn'>NULL</span>,
  api_key <span class='op'>=</span> <span class='cn'>NULL</span>,
  auth_active <span class='op'>=</span> <span class='cn'>TRUE</span>,
  cred <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>package</code></dt><dd><p>Package name.</p></dd>

<dt><code>app</code></dt><dd><p>An OAuth consumer application.</p></dd>

<dt><code>api_key</code></dt><dd><p>An API key.</p></dd>

<dt><code>auth_active</code></dt><dd><p>Logical, indicating whether auth is active.</p></dd>

<dt><code>cred</code></dt><dd><p>Credentials.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>For more details on the parameters, see <code><a href='init_AuthState.html'>init_AuthState()</a></code></p>

<p><hr>
<a id="method-format"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code><a href='https://rdrr.io/r/base/format.html'>format()</a></code></h3>
<p>Format an AuthState</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>AuthState</span><span class='op'>$</span><span class='fu'>format</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>...</code></dt><dd><p>Not used.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-set_app"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>set_app()</code></h3>
<p>Set the OAuth app</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>AuthState</span><span class='op'>$</span><span class='fu'>set_app</span><span class='op'>(</span><span class='va'>app</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>app</code></dt><dd><p>An OAuth consumer application.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-set_api_key"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>set_api_key()</code></h3>
<p>Set the API key</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>AuthState</span><span class='op'>$</span><span class='fu'>set_api_key</span><span class='op'>(</span><span class='va'>value</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>value</code></dt><dd><p>An API key.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-set_auth_active"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>set_auth_active()</code></h3>
<p>Set whether auth is (in)active</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>AuthState</span><span class='op'>$</span><span class='fu'>set_auth_active</span><span class='op'>(</span><span class='va'>value</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>value</code></dt><dd><p>Logical, indicating whether to send requests authorized with
user credentials.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-set_cred"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>set_cred()</code></h3>
<p>Set credentials</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>AuthState</span><span class='op'>$</span><span class='fu'>set_cred</span><span class='op'>(</span><span class='va'>cred</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>cred</code></dt><dd><p>User credentials.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clear_cred"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>clear_cred()</code></h3>
<p>Clear credentials</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>AuthState</span><span class='op'>$</span><span class='fu'>clear_cred</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<p><hr>
<a id="method-get_cred"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>get_cred()</code></h3>
<p>Get credentials</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>AuthState</span><span class='op'>$</span><span class='fu'>get_cred</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<p><hr>
<a id="method-has_cred"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>has_cred()</code></h3>
<p>Report if we have credentials</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>AuthState</span><span class='op'>$</span><span class='fu'>has_cred</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<p><hr>
<a id="method-clone"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>AuthState</span><span class='op'>$</span><span class='fu'>clone</span><span class='op'>(</span>deep <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jennybryan.org'>Jennifer Bryan</a>, Craig Citro, <a href='http://hadley.nz'>Hadley Wickham</a>, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


