<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Authorization state — AuthState-class • gargle</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Authorization state — AuthState-class"><meta name="description" content="An AuthState object manages an authorization state, typically on behalf of
a wrapper package that makes requests to a Google API.
The vignette(&quot;gargle-auth-in-client-package) describes a design for wrapper
packages that relies on an AuthState object. This state can then be
incorporated into the package's requests for tokens and can control the
inclusion of tokens in requests to the target API.
api_key is the simplest way to associate a request with a specific
Google Cloud Platform project.
A few calls to certain APIs, e.g. reading a public Sheet, can succeed
with an API key, but this is the exception.
client is an OAuth client ID (and secret) associated with a specific
Google Cloud Platform project.
This is used in the OAuth flow, in which an authenticated user authorizes
the client to access or manipulate data on their behalf.
auth_active reflects whether outgoing requests will be authorized by an
authenticated user or are unauthorized requests for public resources.
These two states correspond to sending a request with a token versus an
API key, respectively.
cred is where the current token is cached within a session, once one
has been fetched. It is generally assumed to be an instance of
httr::TokenServiceAccount or
httr::Token2.0 (or a subclass thereof), probably
obtained via token_fetch() (or one of its constituent credential
fetching functions).


An AuthState should be created through the constructor function
init_AuthState(), which has more details on the arguments."><meta property="og:description" content="An AuthState object manages an authorization state, typically on behalf of
a wrapper package that makes requests to a Google API.
The vignette(&quot;gargle-auth-in-client-package) describes a design for wrapper
packages that relies on an AuthState object. This state can then be
incorporated into the package's requests for tokens and can control the
inclusion of tokens in requests to the target API.
api_key is the simplest way to associate a request with a specific
Google Cloud Platform project.
A few calls to certain APIs, e.g. reading a public Sheet, can succeed
with an API key, but this is the exception.
client is an OAuth client ID (and secret) associated with a specific
Google Cloud Platform project.
This is used in the OAuth flow, in which an authenticated user authorizes
the client to access or manipulate data on their behalf.
auth_active reflects whether outgoing requests will be authorized by an
authenticated user or are unauthorized requests for public resources.
These two states correspond to sending a request with a token versus an
API key, respectively.
cred is where the current token is cached within a session, once one
has been fetched. It is generally assumed to be an instance of
httr::TokenServiceAccount or
httr::Token2.0 (or a subclass thereof), probably
obtained via token_fetch() (or one of its constituent credential
fetching functions).


An AuthState should be created through the constructor function
init_AuthState(), which has more details on the arguments."><meta name="robots" content="noindex"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="gargle.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gargle</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.6.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/non-interactive-auth.html">Non-interactive auth</a></li>
    <li><a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting gargle auth</a></li>
    <li><a class="dropdown-item" href="../articles/auth-from-web.html">Auth when using R from the browser</a></li>
    <li><a class="dropdown-item" href="../articles/get-api-credentials.html">How to get your own API credentials</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/07/gargle-1-2-0/">gargle 1.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2019/08/gargle-hello-world/">gargle's debut on CRAN</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/gargle/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Authorization state</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/gargle/blob/main/R/AuthState-class.R" class="external-link"><code>R/AuthState-class.R</code></a></small>
      <div class="d-none name"><code>AuthState-class.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>An <code>AuthState</code> object manages an authorization state, typically on behalf of
a wrapper package that makes requests to a Google API.</p>
<p>The <code>vignette("gargle-auth-in-client-package)</code> describes a design for wrapper
packages that relies on an <code>AuthState</code> object. This state can then be
incorporated into the package's requests for tokens and can control the
inclusion of tokens in requests to the target API.</p><ul><li><p><code>api_key</code> is the simplest way to associate a request with a specific
Google Cloud Platform <a href="https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy#projects" class="external-link">project</a>.
A few calls to certain APIs, e.g. reading a public Sheet, can succeed
with an API key, but this is the exception.</p></li>
<li><p><code>client</code> is an OAuth client ID (and secret) associated with a specific
Google Cloud Platform <a href="https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy#projects" class="external-link">project</a>.
This is used in the OAuth flow, in which an authenticated user authorizes
the client to access or manipulate data on their behalf.</p></li>
<li><p><code>auth_active</code> reflects whether outgoing requests will be authorized by an
authenticated user or are unauthorized requests for public resources.
These two states correspond to sending a request with a token versus an
API key, respectively.</p></li>
<li><p><code>cred</code> is where the current token is cached within a session, once one
has been fetched. It is generally assumed to be an instance of
<code><a href="https://httr.r-lib.org/reference/Token-class.html" class="external-link">httr::TokenServiceAccount</a></code> or
<code><a href="https://httr.r-lib.org/reference/Token-class.html" class="external-link">httr::Token2.0</a></code> (or a subclass thereof), probably
obtained via <code><a href="token_fetch.html">token_fetch()</a></code> (or one of its constituent credential
fetching functions).</p></li>
</ul><p>An <code>AuthState</code> should be created through the constructor function
<code><a href="init_AuthState.html">init_AuthState()</a></code>, which has more details on the arguments.</p>
    </div>


    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>package</code></dt>
<dd><p>Package name.</p></dd>


<dt><code>client</code></dt>
<dd><p>An OAuth client.</p></dd>


<dt><code>app</code></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Use <code>client</code> instead.</p></dd>


<dt><code>api_key</code></dt>
<dd><p>An API key.</p></dd>


<dt><code>auth_active</code></dt>
<dd><p>Logical, indicating whether auth is active.</p></dd>


<dt><code>cred</code></dt>
<dd><p>Credentials.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-AuthState-new"><code>AuthState$new()</code></a></p></li>
<li><p><a href="#method-AuthState-format"><code>AuthState$format()</code></a></p></li>
<li><p><a href="#method-AuthState-set_client"><code>AuthState$set_client()</code></a></p></li>
<li><p><a href="#method-AuthState-set_app"><code>AuthState$set_app()</code></a></p></li>
<li><p><a href="#method-AuthState-set_api_key"><code>AuthState$set_api_key()</code></a></p></li>
<li><p><a href="#method-AuthState-set_auth_active"><code>AuthState$set_auth_active()</code></a></p></li>
<li><p><a href="#method-AuthState-set_cred"><code>AuthState$set_cred()</code></a></p></li>
<li><p><a href="#method-AuthState-clear_cred"><code>AuthState$clear_cred()</code></a></p></li>
<li><p><a href="#method-AuthState-get_cred"><code>AuthState$get_cred()</code></a></p></li>
<li><p><a href="#method-AuthState-has_cred"><code>AuthState$has_cred()</code></a></p></li>
<li><p><a href="#method-AuthState-clone"><code>AuthState$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-AuthState-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new AuthState</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/AuthState-class.html">AuthState</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  package <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  client <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  api_key <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  auth_active <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cred <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  app <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>package</code></dt>
<dd><p>Package name.</p></dd>


<dt><code>client</code></dt>
<dd><p>An OAuth client.</p></dd>


<dt><code>api_key</code></dt>
<dd><p>An API key.</p></dd>


<dt><code>auth_active</code></dt>
<dd><p>Logical, indicating whether auth is active.</p></dd>


<dt><code>cred</code></dt>
<dd><p>Credentials.</p></dd>


<dt><code>app</code></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Use <code>client</code> instead.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h4>
<p>For more details on the parameters, see <code><a href="init_AuthState.html">init_AuthState()</a></code></p>
</div>


</div><p></p><hr><a id="method-AuthState-format"></a><div class="section">
<h3 id="method-format-">Method <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code><a class="anchor" aria-label="anchor" href="#method-format-"></a></h3>
<p>Format an AuthState</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AuthState</span><span class="op">$</span><span class="fu">format</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>Not used.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-AuthState-set_client"></a><div class="section">
<h3 id="method-set-client-">Method <code>set_client()</code><a class="anchor" aria-label="anchor" href="#method-set-client-"></a></h3>
<p>Set the OAuth client</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AuthState</span><span class="op">$</span><span class="fu">set_client</span><span class="op">(</span><span class="va">client</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>client</code></dt>
<dd><p>An OAuth client.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-AuthState-set_app"></a><div class="section">
<h3 id="method-set-app-">Method <code>set_app()</code><a class="anchor" aria-label="anchor" href="#method-set-app-"></a></h3>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Deprecated method to set
the OAuth client</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AuthState</span><span class="op">$</span><span class="fu">set_app</span><span class="op">(</span><span class="va">app</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>app</code></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Use <code>client</code> instead.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-AuthState-set_api_key"></a><div class="section">
<h3 id="method-set-api-key-">Method <code>set_api_key()</code><a class="anchor" aria-label="anchor" href="#method-set-api-key-"></a></h3>
<p>Set the API key</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AuthState</span><span class="op">$</span><span class="fu">set_api_key</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>An API key.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-AuthState-set_auth_active"></a><div class="section">
<h3 id="method-set-auth-active-">Method <code>set_auth_active()</code><a class="anchor" aria-label="anchor" href="#method-set-auth-active-"></a></h3>
<p>Set whether auth is (in)active</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AuthState</span><span class="op">$</span><span class="fu">set_auth_active</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>Logical, indicating whether to send requests authorized with
user credentials.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-AuthState-set_cred"></a><div class="section">
<h3 id="method-set-cred-">Method <code>set_cred()</code><a class="anchor" aria-label="anchor" href="#method-set-cred-"></a></h3>
<p>Set credentials</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AuthState</span><span class="op">$</span><span class="fu">set_cred</span><span class="op">(</span><span class="va">cred</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>cred</code></dt>
<dd><p>User credentials.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-AuthState-clear_cred"></a><div class="section">
<h3 id="method-clear-cred-">Method <code>clear_cred()</code><a class="anchor" aria-label="anchor" href="#method-clear-cred-"></a></h3>
<p>Clear credentials</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AuthState</span><span class="op">$</span><span class="fu">clear_cred</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-AuthState-get_cred"></a><div class="section">
<h3 id="method-get-cred-">Method <code>get_cred()</code><a class="anchor" aria-label="anchor" href="#method-get-cred-"></a></h3>
<p>Get credentials</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AuthState</span><span class="op">$</span><span class="fu">get_cred</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-AuthState-has_cred"></a><div class="section">
<h3 id="method-has-cred-">Method <code>has_cred()</code><a class="anchor" aria-label="anchor" href="#method-has-cred-"></a></h3>
<p>Report if we have credentials</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AuthState</span><span class="op">$</span><span class="fu">has_cred</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-AuthState-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AuthState</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, Craig Citro, <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

